domain solution
% Customised Customized Thermal Liquid Domain
% This domain is a modified version standard Thermal Liquid domain, where
% a trace species has been added to allow for concentration tracking. It 
% is inteded for simulating simple filtration processes where the trace 
% species does not contribute to the thermodynamics of the liquid.
%
% Copyright 2012-2025 The MathWorks, Inc.

parameters
    % Default liquid property tables for water
    % Rows of the tables correspond to the temperature vector
    % Columns of the tables correspond to the pressure vector

    T_TLU = {[273.1600:10:373.16]', 'K'  }; % Temperature vector
    p_TLU = {[0.01, 0.1, 5:5:50],   'MPa'}; % Pressure vector

    pT_validity_TLU = {[
        1     1     1     1     1     1     1     1     1     1     1     1
        1     1     1     1     1     1     1     1     1     1     1     1
        1     1     1     1     1     1     1     1     1     1     1     1
        1     1     1     1     1     1     1     1     1     1     1     1
        1     1     1     1     1     1     1     1     1     1     1     1
        0     1     1     1     1     1     1     1     1     1     1     1
        0     1     1     1     1     1     1     1     1     1     1     1
        0     1     1     1     1     1     1     1     1     1     1     1
        0     1     1     1     1     1     1     1     1     1     1     1
        0     1     1     1     1     1     1     1     1     1     1     1
        0     1     1     1     1     1     1     1     1     1     1     1
        ], '1'}; % Pressure-temperature validity matrix

    rho_TLU = {[
        999.8    999.8    1002.3    1004.8    1007.3    1009.7    1012.2    1014.5    1016.9    1019.2    1021.5    1023.8
        999.7    999.7    1002.0    1004.4    1006.7    1009.0    1011.3    1013.5    1015.8    1018.0    1020.2    1022.3
        998.2    998.2    1000.4    1002.7    1004.9    1007.1    1009.3    1011.5    1013.6    1015.7    1017.8    1019.9
        995.6    995.6    997.8     1000.0    1002.2    1004.3    1006.5    1008.6    1010.7    1012.7    1014.8    1016.8
        992.2    992.2    994.4     996.5     998.6     1000.8    1002.9    1004.9    1007.0    1009.0    1011.0    1013.0
        988.0    988.0    990.2     992.3     994.4     996.5     998.6     1000.7    1002.7    1004.7    1006.7    1008.7
        983.2    983.2    985.3     987.5     989.6     991.7     993.8     995.8     997.9     999.9     1001.9    1003.9
        977.8    977.8    979.9     982.1     984.2     986.3     988.4     990.5     992.5     994.6     996.6     998.6
        971.8    971.8    974.0     976.2     978.3     980.5     982.6     984.7     986.8     988.8     990.9     992.9
        965.3    965.3    967.5     969.8     972.0     974.2     976.3     978.5     980.6     982.7     984.7     986.8
        958.8    958.8    960.6     962.9     965.2     967.4     969.6     971.8     974.0     976.1     978.2     980.3
        ], 'kg/m^3'}; % Density table (NDG) specifically for the Solvent, not including the Solute

    u_TLU = {[
        0.0002    0.0018    0.0860    0.1588    0.2190    0.2670    0.3034    0.3288    0.3436    0.3483    0.3435    0.3294
        42.0620   42.0600   41.9350   41.8040   41.6680   41.5270   41.3820   41.2330   41.0810   40.9240   40.7630   40.5990
        83.9530   83.9480   83.6510   83.3490   83.0490   82.7490   82.4510   82.1530   81.8560   81.5600   81.2650   80.9710
        125.7700  125.7600  125.3100  124.8600  124.4100  123.9700  123.5300  123.1000  122.6800  122.2500  121.8400  121.4200
        167.5700  167.5600  166.9600  166.3700  165.7900  165.2100  164.6500  164.0900  163.5400  163.0000  162.4600  161.9400
        209.3600  209.3600  208.6300  207.9000  207.1900  206.4800  205.7900  205.1100  204.4500  203.7900  203.1400  202.5000
        251.1900  251.1900  250.3300  249.4700  248.6200  247.7900  246.9800  246.1800  245.3900  244.6200  243.8600  243.1200
        293.0600  293.0600  292.0700  291.0700  290.1000  289.1400  288.2000  287.2800  286.3800  285.4900  284.6200  283.7700
        334.9900  334.9900  333.8600  332.7300  331.6300  330.5400  329.4800  328.4400  327.4100  326.4100  325.4300  324.4600
        377.0000  377.0000  375.7300  374.4600  373.2200  372.0000  370.8100  369.6400  368.5000  367.3800  366.2700  365.1900
        419.0100  419.0100  417.6900  416.2700  414.8900  413.5400  412.2100  410.9100  409.6400  408.4000  407.1700  405.9800
        ], 'kJ/kg'}; % Specific internal energy table

    nu_TLU = {[
        1.7917    1.7914    1.7763    1.7615    1.7473    1.7338    1.7208    1.7085    1.6967    1.6854    1.6747    1.6645
        1.3061    1.3059    1.2986    1.2914    1.2845    1.2779    1.2716    1.2656    1.2598    1.2543    1.2491    1.2441
        1.0032    1.0032    0.9995    0.9959    0.9924    0.9891    0.9859    0.9829    0.9801    0.9774    0.9748    0.9724
        0.8006    0.8005    0.7987    0.7970    0.7953    0.7937    0.7922    0.7908    0.7894    0.7881    0.7870    0.7859
        0.6577    0.6577    0.6570    0.6562    0.6555    0.6548    0.6543    0.6537    0.6532    0.6528    0.6523    0.6520
        0.5530    0.5530    0.5529    0.5527    0.5526    0.5525    0.5524    0.5524    0.5524    0.5524    0.5524    0.5525
        0.4739    0.4739    0.4741    0.4743    0.4745    0.4747    0.4750    0.4753    0.4755    0.4758    0.4762    0.4765
        0.4127    0.4127    0.4131    0.4135    0.4139    0.4143    0.4148    0.4152    0.4157    0.4162    0.4167    0.4172
        0.3643    0.3643    0.3648    0.3654    0.3659    0.3665    0.3670    0.3676    0.3682    0.3688    0.3694    0.3700
        0.3254    0.3254    0.3261    0.3267    0.3273    0.3280    0.3286    0.3293    0.3299    0.3306    0.3312    0.3319
        0.2866    0.2866    0.2945    0.2952    0.2959    0.2965    0.2972    0.2979    0.2986    0.2993    0.3000    0.3007
        ], 'mm^2/s'}; % Kinematic viscosity table

    cp_TLU  = {[
        4.2199    4.2194    4.1957    4.1726    4.1508    4.1300    4.1103    4.0916    4.0738    4.0569    4.0408    4.0254
        4.1955    4.1951    4.1769    4.1592    4.1422    4.1259    4.1103    4.0954    4.0812    4.0676    4.0545    4.0421
        4.1843    4.1840    4.1690    4.1543    4.1401    4.1264    4.1133    4.1007    4.0885    4.0768    4.0656    4.0548
        4.1801    4.1798    4.1667    4.1538    4.1413    4.1293    4.1177    4.1064    4.0956    4.0851    4.0750    4.0653
        4.1796    4.1794    4.1675    4.1558    4.1444    4.1334    4.1227    4.1123    4.1023    4.0926    4.0832    4.0741
        4.1813    4.1813    4.1702    4.1592    4.1484    4.1380    4.1279    4.1181    4.1086    4.0993    4.0903    4.0816
        4.1850    4.1850    4.1742    4.1636    4.1532    4.1432    4.1334    4.1239    4.1146    4.1056    4.0969    4.0884
        4.1901    4.1901    4.1795    4.1690    4.1588    4.1489    4.1393    4.1299    4.1207    4.1118    4.1032    4.0947
        4.1968    4.1968    4.1862    4.1757    4.1655    4.1555    4.1458    4.1364    4.1273    4.1183    4.1096    4.1012
        4.2052    4.2052    4.1944    4.1837    4.1733    4.1632    4.1534    4.1438    4.1345    4.1255    4.1166    4.1080
        4.2136    4.2136    4.2045    4.1935    4.1828    4.1724    4.1623    4.1524    4.1429    4.1335    4.1245    4.1157
        ], 'kJ/(kg*K)'}; % Specific heat at constant pressure table

    k_TLU = {[
        561.0400  561.0900  563.8000  566.5600  569.3200  572.0800  574.8200  577.5400  580.2400  582.9200  585.5700  588.1800
        580.0200  580.0700  582.4500  584.8800  587.3200  589.7500  592.1800  594.6100  597.0200  599.4200  601.8000  604.1600
        598.4400  598.4800  600.7300  603.0300  605.3300  607.6400  609.9400  612.2400  614.5400  616.8200  619.1000  621.3600
        615.4800  615.5200  617.7300  620.0000  622.2600  624.5400  626.8100  629.0700  631.3400  633.6000  635.8500  638.0900
        630.6000  630.6400  632.8700  635.1500  637.4400  639.7200  642.0100  644.2900  646.5700  648.8400  651.1100  653.3600
        643.6100  643.6100  645.8800  648.2100  650.5300  652.8600  655.1800  657.5100  659.8200  662.1400  664.4400  666.7400
        654.3900  654.3900  656.7300  659.1200  661.5000  663.8900  666.2700  668.6500  671.0200  673.3800  675.7400  678.0900
        663.1300  663.1300  665.5400  668.0000  670.4600  672.9100  675.3600  677.8000  680.2400  682.6700  685.0900  687.5000
        670.0200  670.0200  672.5100  675.0500  677.5900  680.1200  682.6400  685.1600  687.6700  690.1700  692.6600  695.1400
        675.2700  675.2700  677.8500  680.4800  683.1100  685.7300  688.3400  690.9400  693.5300  696.1100  698.6800  701.2400
        680.5200  680.5200  681.7700  684.5000  687.2200  689.9400  692.6400  695.3400  698.0200  700.6900  703.3500  706.0000
        ], 'mW/(m*K)'}; % Thermal conductivity table

    beta_TLU = {[
        1.9649    1.9654    1.9929    2.0213    2.0499    2.0787    2.1078    2.1372    2.1668    2.1966    2.2268    2.2572
        2.0913    2.0918    2.1191    2.1471    2.1752    2.2036    2.2322    2.2610    2.2899    2.3191    2.3485    2.3781
        2.1786    2.1791    2.2067    2.2350    2.2634    2.2919    2.3206    2.3494    2.3784    2.4075    2.4367    2.4661
        2.2332    2.2337    2.2619    2.2908    2.3197    2.3487    2.3778    2.4070    2.4363    2.4657    2.4951    2.5246
        2.2600    2.2605    2.2895    2.3191    2.3487    2.3784    2.4081    2.4378    2.4675    2.4973    2.5272    2.5571
        2.2638    2.2638    2.2936    2.3240    2.3544    2.3848    2.4151    2.4455    2.4758    2.5062    2.5365    2.5669
        2.2472    2.2472    2.2779    2.3092    2.3403    2.3715    2.4025    2.4336    2.4646    2.4955    2.5264    2.5573
        2.2140    2.2140    2.2455    2.2776    2.3096    2.3415    2.3733    2.4050    2.4367    2.4683    2.4998    2.5313
        2.1668    2.1668    2.1992    2.2321    2.2649    2.2976    2.3301    2.3626    2.3949    2.4272    2.4593    2.4914
        2.1081    2.1081    2.1413    2.1750    2.2086    2.2421    2.2754    2.3085    2.3415    2.3744    2.4072    2.4399
        2.0494    2.0494    2.0739    2.1084    2.1428    2.1770    2.2110    2.2449    2.2786    2.3121    2.3455    2.3788
        ], 'GPa'}; % Isothermal bulk modulus table

    alpha_TLU = {1e-4 * [
        -0.6790   -0.6760   -0.4900   -0.3070   -0.1300    0.0410    0.2060    0.3650    0.5190    0.6680    0.8110    0.9490
        0.8780    0.8810    0.9980    1.1140    1.2270    1.3370    1.4450    1.5490    1.6510    1.7500    1.8460    1.9390
        2.0680    2.0690    2.1410    2.2130    2.2830    2.3520    2.4200    2.4860    2.5510    2.6140    2.6760    2.7360
        3.0340    3.0350    3.0740    3.1130    3.1520    3.1910    3.2290    3.2670    3.3050    3.3410    3.3770    3.4130
        3.8550    3.8560    3.8700    3.8840    3.8990    3.9140    3.9300    3.9460    3.9610    3.9770    3.9930    4.0090
        4.5780    4.5780    4.5720    4.5660    4.5620    4.5580    4.5550    4.5520    4.5500    4.5490    4.5480    4.5470
        5.2330    5.2330    5.2090    5.1860    5.1650    5.1440    5.1250    5.1070    5.0900    5.0740    5.0590    5.0450
        5.8400    5.8400    5.8010    5.7620    5.7250    5.6910    5.6570    5.6250    5.5950    5.5660    5.5380    5.5120
        6.4140    6.4140    6.3600    6.3070    6.2560    6.2080    6.1610    6.1170    6.0740    6.0330    5.9940    5.9560
        6.9670    6.9670    6.8980    6.8310    6.7660    6.7050    6.6460    6.5890    6.5350    6.4820    6.4320    6.3840
        7.5190    7.5190    7.4230    7.3420    7.2640    7.1890    7.1180    7.0490    6.9830    6.9200    6.8590    6.8000
        ], '1/K'}; % Isobaric thermal expansion coefficient table

    mu_TLU = {[
        1.79134166000000	1.79104172000000	1.78038549000000	1.76995520000000	1.76005529000000	1.75061786000000	1.74179376000000	1.73327325000000	1.72537423000000	1.71775968000000	1.71070605000000	1.70411510000000
        1.30570817000000	1.30550823000000	1.30119720000000	1.29708216000000	1.29310615000000	1.28940110000000	1.28596908000000	1.28268560000000	1.27970484000000	1.27687740000000	1.27433182000000	1.27184343000000
        1.00139424000000	1.00139424000000	0.999899800000000	0.998588930000000	0.997262760000000	0.996122610000000	0.995068870000000	0.994203350000000	0.993429360000000	0.992745180000000	0.992151440000000	0.991750760000000
        0.797077360000000	0.796977800000000	0.796942860000000	0.797000000000000	0.797049660000000	0.797112910000000	0.797349300000000	0.797600880000000	0.797846580000000	0.798108870000000	0.798647600000000	0.799103120000000
        0.652569940000000	0.652569940000000	0.653320800000000	0.653903300000000	0.654582300000000	0.655323840000000	0.656197470000000	0.656903130000000	0.657772400000000	0.658675200000000	0.659475300000000	0.660476000000000
        0.546364000000000	0.546364000000000	0.547481580000000	0.548444210000000	0.549505440000000	0.550566250000000	0.551626640000000	0.552786680000000	0.553891480000000	0.554996280000000	0.556101080000000	0.557306750000000
        0.465938480000000	0.465938480000000	0.467130730000000	0.468371250000000	0.469565200000000	0.470759990000000	0.472055000000000	0.473303740000000	0.474501450000000	0.475752420000000	0.477104780000000	0.478358350000000
        0.403538060000000	0.403538060000000	0.404796690000000	0.406098350000000	0.407360380000000	0.408624090000000	0.409988320000000	0.411255600000000	0.412582250000000	0.413952520000000	0.415283220000000	0.416615920000000
        0.354026740000000	0.354026740000000	0.355315200000000	0.356703480000000	0.357959970000000	0.359353250000000	0.360614200000000	0.361975720000000	0.363339760000000	0.364669440000000	0.366038460000000	0.367373000000000
        0.314108620000000	0.314108620000000	0.315501750000000	0.316833660000000	0.318135600000000	0.319537600000000	0.320812180000000	0.322220050000000	0.323499940000000	0.324880620000000	0.326132640000000	0.327518920000000
        0.274792080000000	0.274792080000000	0.282896700000000	0.284248080000000	0.285602680000000	0.286834100000000	0.288165120000000	0.289499220000000	0.290836400000000	0.292146730000000	0.293460000000000	0.294776210000000
        ], 'cP'}; % Dynamic viscosity table

    Pr_TLU = {[
        13.4736964762477	13.4686439490420	13.2493142965466	13.0353626580062	12.8322164999157	12.6381830544679	12.4548465462719	12.2794279698376	12.1136590689611	11.9549496428189	11.8049439124955	11.6626626603081
        9.44467195482053	9.44151149977244	9.33122256791141	9.22381363676652	9.11990787735817	9.02066977276812	8.92586495579722	8.83454803356822	8.74800072528223	8.66475344873378	8.58554065169492	8.50920009335772
        7.00176110960497	7.00079117123379	6.93919442378440	6.87932273999469	6.82068880226653	6.76453218666316	6.71052363014559	6.65903841197080	6.60922956741628	6.56143372430207	6.51541091013407	6.47185364627269
        5.41343840991746	5.41202204386535	5.37552298700403	5.33964290322581	5.30457004621541	5.27030828972204	5.23802302549417	5.20652431944299	5.17575387754300	5.14576159223011	5.11832817488401	5.09112180685483
        4.32521617701237	4.32473488398453	4.30217016764896	4.27850324197434	4.25585291810994	4.23422053438379	4.21380556310494	4.19280563333126	4.17337599412283	4.15463615609395	4.13565994219103	4.11847262091343
        3.54952811982412	3.54952811982412	3.53487905635103	3.51905888251030	3.50417101024703	3.48963505575468	3.47547178982264	3.46219955119770	3.44899902204844	3.43597464373697	3.42336440841009	3.41167956144824
        2.97980185944162	2.97980185944162	2.96910007638756	2.95865781117247	2.94814540988662	2.93791560434409	2.92853068125535	2.91910161278098	2.90957596818277	2.90066401668003	2.89260747207802	2.88416032995620
        2.54982405441769	2.54982405441769	2.54206774326862	2.53446709752994	2.52681792850282	2.51941639595340	2.51282968043118	2.50581956689289	2.49930565326208	2.49328368279842	2.48725000847188	2.48133412018036
        2.21751503303185	2.21751503303185	2.21174479225588	2.20648355149396	2.20056709077023	2.19563081570164	2.19007727405367	2.18529448334404	2.18071486533948	2.17601193148355	2.17173166519793	2.16743411053888
        1.95609099889526	1.95609099889526	1.95226162159770	1.94794407380378	1.94357467974411	1.93997482437694	1.93576039226545	1.93246221551799	1.92855464353381	1.92540690093520	1.92156298423313	1.91866939045120
        1.70143994046905	1.70143994046905	1.74463407769482	1.74140879982469	1.73833545284480	1.73462416853639	1.73167833069993	1.72881836386228	1.72617707452508	1.72342763341135	1.72087263808914	1.71842839588810
        ], '1'}; % Prandtl number table
end

parameters
    pT_region_flag         = foundation.enum.pT_region_TL.min_max; % Valid pressure-temperature region parameterization
    %                                                          0 - min_max
    %                                                          1 - validity_matrix
    T_min                  = {273.16,   'K'       }; % Minimum valid temperature
    T_max                  = {373.16,   'K'       }; % Maximum valid temperature
    p_min                  = {0.01,     'MPa'     }; % Minimum valid pressure
    p_max                  = {50,       'MPa'     }; % Maximum valid pressure
    p_atm                  = {0.101325, 'MPa'     }; % Atmospheric pressure
    properties_range_check = simscape.enum.assert.action.error; % Pressure and temperature outside valid range
    %                                                             0 - none
    %                                                             1 - warn
    %                                                             2 - error
    k_cv                   = {1.43e-4,  'kg/(m*s)'}; % Ratio of thermal conductivity to specific heat
    max_aspect_ratio       = {5,        '1'       }; % Maximum component aspect ratio (length/diameter) for thermal conduction
    D                      = {5e-3,     'mm^2/s'  }; % Species diffusivity
    rho_species = {2000,'kg/m^3'}; % Species density
    M = {58.44, 'g/mol'}; % (NDG) Species molar mass 
    i = {2, '1'};   % (NDG) Species Ion Count
    R = {8.314, 'J/(mol*K)'}; % (NDG) Ideal Gas Constant
    fm = {0.62,"1"}; % Maximum volume fraction
    nu_factor = {2.5,"1"}; % Intrinsic viscosity factor
end

variables
    p = {0.1, 'MPa'}; % Pressure
    T = {300, 'K'  }; % Temperature
    x = {0, 'kg/m^3'}; % Species concentration
end

variables (Balancing = true)
    mdot = {0, 'kg/s'}; % Mass flow rate
    Phi  = {0, 'kW'  }; % Energy flow rate
    mdot_x = {0, 'kg/s'}; % Species flow rate
end

end